* INFO  2025-07-21T11:47:27,311 Scheduler initiated execution of job: JobConfiguration{uid='aBcD9Zo0xrG', name='Metadata Synchronization', jobType=META_DATA_SYNC, cronExpression='0 0 3 ? * MON', delay='null', jobParameters=org.hisp.dhis.scheduling.parameters.MetadataSyncJobParameters@2e53b0b9, enabled=true, inMemoryJob=false, lastRuntimeExecution='00:00:01.882', userUid='null', leaderOnlyJob=false, jobStatus=SCHEDULED, nextExecutionTime=null, lastExecutedStatus=COMPLETED, lastExecuted=2025-07-21 11:44:58.057} (DefaultSchedulingManager.java [http-nio-8080-exec-4])
* INFO  2025-07-21T11:47:27,318 Metadata Sync cron Job started (MetadataSyncJob.java [taskScheduler-20])
* INFO  2025-07-21T11:47:27,318 Checking for an open Hibernate session (DbmsUtils.java [taskScheduler-20])
* INFO  2025-07-21T11:47:27,318 No open session found, caught HibernateException Could not obtain transaction-synchronized Session for current thread, opening new Hibernate session now (DbmsUtils.java [taskScheduler-20])
* INFO  2025-07-21T11:47:27,318 Now trying. Current count: 1 (MetadataRetryContext.java [taskScheduler-20])
* INFO  2025-07-21T11:47:27,320 [META_DATA_SYNC aBcD9Zo0xrG] Process started: Setting up metadata synchronisation (ControlledJobProgress.java [taskScheduler-20])
* INFO  2025-07-21T11:47:27,321 [META_DATA_SYNC aBcD9Zo0xrG] Stage completed after 0s (ControlledJobProgress.java [taskScheduler-20])
* INFO  2025-07-21T11:47:27,321 [META_DATA_SYNC aBcD9Zo0xrG] Process completed after 0.001s: Finished setting up metadata synchronisation (ControlledJobProgress.java [taskScheduler-20])
* INFO  2025-07-21T11:47:27,321 [META_DATA_SYNC aBcD9Zo0xrG] Process started: Starting DataValueSynchronization job (ControlledJobProgress.java [taskScheduler-20])
* INFO  2025-07-21T11:47:27,437 Status: [Available: true, message: Authentication was successful, HTTP status: 200 OK] (SyncUtils.java [taskScheduler-20])
* INFO  2025-07-21T11:47:27,437 [META_DATA_SYNC aBcD9Zo0xrG] Stage started: Counting data values (ControlledJobProgress.java [taskScheduler-20])
* INFO  2025-07-21T11:47:27,441 [META_DATA_SYNC aBcD9Zo0xrG] Stage completed after 0.004s: DataValues last changed before Thu Jan 01 01:00:00 CET 1970 will not be synchronized. (ControlledJobProgress.java [taskScheduler-20])
* INFO  2025-07-21T11:47:27,441 [META_DATA_SYNC aBcD9Zo0xrG] Process completed after 0.12s: Skipping synchronization, no new or updated DataValues (ControlledJobProgress.java [taskScheduler-20])
* INFO  2025-07-21T11:47:27,441 [META_DATA_SYNC aBcD9Zo0xrG] Process started: Starting Event programs data synchronization job. (ControlledJobProgress.java [taskScheduler-20])
* INFO  2025-07-21T11:47:27,532 Status: [Available: true, message: Authentication was successful, HTTP status: 200 OK] (SyncUtils.java [taskScheduler-20])
* INFO  2025-07-21T11:47:27,533 [META_DATA_SYNC aBcD9Zo0xrG] Stage started: Counting anonymous events ready to be synchronised. (ControlledJobProgress.java [taskScheduler-20])
* INFO  2025-07-21T11:47:27,533 CurrentUser is null, before performing EVENT_PROGRAMS_DATA_SYNC, the remote sync user will be injected (EventSynchronization.java [taskScheduler-20])
* INFO  2025-07-21T11:47:27,570 [META_DATA_SYNC aBcD9Zo0xrG] Stage completed after 0.038s: Events last changed before Thu Jan 01 01:00:00 CET 1970 will not be synchronized. (ControlledJobProgress.java [taskScheduler-20])
* INFO  2025-07-21T11:47:27,570 [META_DATA_SYNC aBcD9Zo0xrG] Stage started: 2 anonymous Events to synchronize were found.
Remote server URL for Event programs POST synchronization: http://192.168.128.1:7000/api/events?strategy=SYNC
Event programs data synchronization job has 1 pages to synchronize. With page size: 50 (ControlledJobProgress.java [taskScheduler-20])
* INFO  2025-07-21T11:47:27,848 Sync summary: ImportSummaries{importSummaries=[ImportSummary{status=SUCCESS, description='null', importCount=[imports=1, updates=0, ignores=0], conflicts={}, dataSetComplete='null', reference='ZOkh9BeNXYF', href='http://192.168.128.1:7000/api/events/ZOkh9BeNXYF'}, ImportSummary{status=SUCCESS, description='Deletion of event zCziVRiuiHG was successful', importCount=[imports=0, updates=0, ignores=0], conflicts={}, dataSetComplete='null', reference='zCziVRiuiHG', href='null'}]} (SyncUtils.java [taskScheduler-20])
* INFO  2025-07-21T11:47:27,849 The lastSynchronized flag of these Events will be updated: [ZOkh9BeNXYF, zCziVRiuiHG] (EventSynchronization.java [taskScheduler-20])
* INFO  2025-07-21T11:47:27,912 [META_DATA_SYNC aBcD9Zo0xrG] Stage completed after 0.342s: 1 successful and 0 failed items (ControlledJobProgress.java [taskScheduler-20])
* INFO  2025-07-21T11:47:27,912 [META_DATA_SYNC aBcD9Zo0xrG] Process completed after 0.471s: SUCCESS! Event programs data sync was successfully done! It took  (ControlledJobProgress.java [taskScheduler-20])
* INFO  2025-07-21T11:47:27,912 [META_DATA_SYNC aBcD9Zo0xrG] Process started: Starting Complete data set registration synchronization job. (ControlledJobProgress.java [taskScheduler-20])
* INFO  2025-07-21T11:47:27,989 Status: [Available: true, message: Authentication was successful, HTTP status: 200 OK] (SyncUtils.java [taskScheduler-20])
* INFO  2025-07-21T11:47:27,989 [META_DATA_SYNC aBcD9Zo0xrG] Stage started: Counting complete data sets (ControlledJobProgress.java [taskScheduler-20])
* INFO  2025-07-21T11:47:28,014 [META_DATA_SYNC aBcD9Zo0xrG] Stage completed after 0.025s: CompleteDataSetRegistrations last changed before Thu Jan 01 01:00:00 CET 1970 will not be synchronized. (ControlledJobProgress.java [taskScheduler-20])
* INFO  2025-07-21T11:47:28,023 [META_DATA_SYNC aBcD9Zo0xrG] Process completed after 0.111s: Skipping completeness synchronization, no new or updated data (ControlledJobProgress.java [taskScheduler-20])
* INFO  2025-07-21T11:47:28,023 [META_DATA_SYNC aBcD9Zo0xrG] Process started: Starting Tracker programs data synchronization job. (ControlledJobProgress.java [taskScheduler-20])
* INFO  2025-07-21T11:47:28,116 Status: [Available: true, message: Authentication was successful, HTTP status: 200 OK] (SyncUtils.java [taskScheduler-20])
* INFO  2025-07-21T11:47:28,116 [META_DATA_SYNC aBcD9Zo0xrG] Stage started: Counting TEIs to synchronise (ControlledJobProgress.java [taskScheduler-20])
* INFO  2025-07-21T11:47:28,130 [META_DATA_SYNC aBcD9Zo0xrG] Stage completed after 0.014s: TrackedEntityInstances last changed before Thu Jan 01 01:00:00 CET 1970 will not be synchronized. (ControlledJobProgress.java [taskScheduler-20])
* INFO  2025-07-21T11:47:28,130 [META_DATA_SYNC aBcD9Zo0xrG] Process completed after 0.107s: Tracker programs data synchronization skipped. No new or updated TEIs found. (ControlledJobProgress.java [taskScheduler-20])
* INFO  2025-07-21T11:47:28,130 [META_DATA_SYNC aBcD9Zo0xrG] Process started: Starting Metadata version comparison (ControlledJobProgress.java [taskScheduler-20])
* INFO  2025-07-21T11:47:28,130 [META_DATA_SYNC aBcD9Zo0xrG] Stage started: Getting the current version of the system (ControlledJobProgress.java [taskScheduler-20])
* INFO  2025-07-21T11:47:28,138 [META_DATA_SYNC aBcD9Zo0xrG] Stage completed after 0.008s: Current Metadata Version of the system: MetadataVersion{importDate=2025-05-27 14:29:17.234, type=BEST_EFFORT, name='Version_596', hashCode='c49e193e46f731f871183d63b4ad50a5'} (ControlledJobProgress.java [taskScheduler-20])
* INFO  2025-07-21T11:47:28,138 [META_DATA_SYNC aBcD9Zo0xrG] Stage started: Fetching the list of remote versions (ControlledJobProgress.java [taskScheduler-20])
* INFO  2025-07-21T11:47:28,239 Status: [Available: true, message: Authentication was successful, HTTP status: 200 OK] (SyncUtils.java [taskScheduler-20])
* INFO  2025-07-21T11:47:28,239 Remote server metadata version  URL: http://192.168.128.1:7000/api/metadata/version/history?baseline=Version_596, username: Data_Sync (MetadataVersionDelegate.java [taskScheduler-20])
* WARN  2025-07-21T11:47:28,306 Dhis http response is null (MetadataVersionDelegate.java [taskScheduler-20])
* WARN  2025-07-21T11:47:28,307 Returning empty for the metadata versions difference (MetadataVersionDelegate.java [taskScheduler-20])
* INFO  2025-07-21T11:47:28,307 [META_DATA_SYNC aBcD9Zo0xrG] Stage completed after 0.169s: Your instance is already using the latest version:MetadataVersion{importDate=2025-05-27 14:29:17.234, type=BEST_EFFORT, name='Version_596', hashCode='c49e193e46f731f871183d63b4ad50a5'} (ControlledJobProgress.java [taskScheduler-20])
* INFO  2025-07-21T11:47:28,307 [META_DATA_SYNC aBcD9Zo0xrG] Process completed after 0.177s: Finished Metadata version comparison (ControlledJobProgress.java [taskScheduler-20])
* INFO  2025-07-21T11:47:28,307 [META_DATA_SYNC aBcD9Zo0xrG] Process started: Synchronize metadata (ControlledJobProgress.java [taskScheduler-20])
Caused by: org.postgresql.util.PSQLException: ERROR: duplicate key value violates unique constraint "completedatasetregistration_pkey"
Caused by: com.fasterxml.jackson.databind.JsonMappingException: No row with the given identifier exists: [org.hisp.dhis.category.CategoryOptionCombo#7452] (through reference chain: org.hisp.dhis.dataset.DataSet["sections"]->org.hibernate.collection.internal.PersistentSet[3]->org.hisp.dhis.dataset.Section["greyedFields"])
* INFO  2025-07-21T11:47:28,307 [META_DATA_SYNC aBcD9Zo0xrG] Process completed after 0s (ControlledJobProgress.java [taskScheduler-20])
* INFO  2025-07-21T11:47:28,307 Metadata sync cron job ended  (MetadataSyncJob.java [taskScheduler-20])
* INFO  2025-07-21T11:47:28,307 Closing Hibernate session (DbmsUtils.java [taskScheduler-20])
